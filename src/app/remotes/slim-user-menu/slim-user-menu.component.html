<ng-container *ngIf="activeMode$ | async as activeMode">
  <div
    class="slim-user-menu"
    [ngClass]="{
      'slim-user-menu-slim': activeMode === Mode.SLIM,
      'slim-user-menu-slim-plus': activeMode === Mode.SLIM_PLUS
    }"
    [hidden]="isHidden$ | async"
  >
    <div class="slim-user-menu-header flex flex-column align-items-center justify-content-center">
      <button
        tabIndex="0"
        class="slim-user-menu-header-button flex flex-column align-items-center justify-content-center outline-none cursor-pointer border-none pt-3 pb-3"
        [ngClass]="{
          'slim-user-menu-header-button-plus': activeMode === Mode.SLIM_PLUS
        }"
        id="ws_slim_user_menu_header_button"
        pRipple
        [pTooltip]="
          (displayMode === DisplayMode.FULL
            ? 'REMOTES.SLIM_USER_MENU.HIDE_TOOLTIP'
            : 'REMOTES.SLIM_USER_MENU.DISPLAY_TOOLTIP'
          ) | translate
        "
        tooltipPosition="right"
        tooltipEvent="both"
        (click)="toggleDisplayMode()"
      >
        <ocx-slot name="onecx-avatar-image" [outputs]="{ imageLoaded: avatarImageLoadedEmitter }"> </ocx-slot>
        <i *ngIf="(avatarImageLoaded$ | async) === undefined" class="slim-user-menu-header-button-icon pi pi-user"></i>
        <ng-container *ngIf="activeMode === Mode.SLIM_PLUS">
          <span
            *ngIf="displayName$ | async as name"
            id="ws_slim_user_menu_display_name"
            class="slim-user-menu-header-button-text"
          >
            {{ name }}
          </span>
        </ng-container>
      </button>
    </div>
    <ul
      *ngIf="menuItems$ | async as menuItems"
      id="ws_slim_user_menu_list"
      class="slim-user-menu-list flex flex-column align-items-center justify-content-center list-none m-0 p-0"
      [ngClass]="{ 'slim-user-menu-list-hidden': displayMode === DisplayMode.HEADER_ONLY }"
    >
      <app-slim-menu-item
        *ngFor="let item of menuItems; let i = index"
        [item]="item"
        [id]="'ws_slim_user_menu_list_item_' + (i + 1)"
        [index]="i"
        [activeMode]="activeMode"
        style="width: 100%"
      ></app-slim-menu-item>
    </ul>
  </div>
</ng-container>
